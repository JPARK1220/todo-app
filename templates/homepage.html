<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css" integrity="sha384-xOolHFLEh07PJGoPkLv1IbcEPTNtaed2xpHsD9ESMhqIYd0nLMwNLD69Npy4HI+N" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="../static/js/jquery-3.2.1.min.js"></script>
    <script src="../static/js/homepage.js"></script>
    <title>Home Page</title>
</head>
<body>
    <!-- {% if logged_in_user %} 
    <h1> this is your user: {{logged_in_user.id}} {{logged_in_user.username}}  {{logged_in_user.password}}</h1>
    {% else %}
    <h1> user does not exist </h1>
    {% endif %} -->
    <nav class="navbar navbar-expand-lg navbar-light bg-light">
      <a class="navbar-brand" href="#">Welcome {{username}}! Your tasks are... </a>
      </button>
      <div class="collapse navbar-collapse" id="navbarNav">
        <ul class="navbar-nav ml-auto">
          <li class="nav-item">
            <form class="form-inline">
              <button class="btn btn-outline-primary my-2 my-sm-0" id="logout-button">Logout</button>
            </form>
          </li>
        </ul>
      </div>
    </nav>

    <!-- <ul>
        {% for task in tasks %}
            <li>Title: {{ task.title }}</li>
            <li>Description: {{ task.description }}</li>
            <li>Due Date: {{ task.due_date }}</li>
            <li>Order Index: {{ task.order_index }}</li>
            <li>Complete: {{ task.complete }}</li>
        {% endfor %}
    </ul> -->

    <div class="container-fluid">
        <div class="row">
          <div class="col">
          </div>
        </div>
        <div class="row">
          <div class="col">
            <div class="card-deck">
              {% for task in tasks %}
              <div class="card mt-3">
                <div class="card-body">
                  <input type="hidden" id="{{task.id}}" data-id="{{task.order_index}}" class="form-control card-order-index-input">
                  {% if loop.index == 1 %}
                  <div class="d-flex justify-content-end">
                    <button class="btn btn-outline-secondary mb-3" style="{% if loop.length == 1 %} display: none; {% else %} display: block; {% endif %}" id="right-button">
                      <i class="fa-solid fa-arrow-right"></i>
                    </button>
                  </div>
                  {% elif loop.index == loop.length %}
                  <div class="d-flex justify-content-between">
                    <button class="btn btn-outline-secondary mb-3" style="display: block" id="left-button"> 
                      <i class="fa-solid fa-arrow-left"></i>
                    </button>
                  </div>
                  {% else %}
                  <div class="d-flex justify-content-between">
                    <button class="btn btn-outline-secondary mh-1 mb-3" style="display: block" id="left-button"> 
                      <i class="fa-solid fa-arrow-left"></i>
                    </button>
                    <button class="btn btn-outline-secondary mh-1 mb-3" style="display: block" id="right-button"> 
                      <i class="fa-solid fa-arrow-right"></i>
                    </button>
                  </div>
                  {% endif %}
                  <input type="hidden" data-id="{{task.id}}" class="form-control card-id-input">
                  <!-- Hidden input field for task id -->

                  <h5 class="card-title">{{ task.title }}</h5>
                  <input type="hidden" class="form-control" name="hidden-title-input" placeholder="{{task.title}}" aria-label="Title">
                  <p class="card-description">{{ task.description }}</p>
                  <input type="hidden" class="form-control" name="hidden-description-input" placeholder="{{ task.description }}" aria-label="Description">
                  <p class="card-due-date">Due Date: {{ task.due_date }}</p>
                  <input type="hidden" class="form-control" name="hidden-due-date-input" placeholder="{{task.due_date}} (YYYY-MM-DD)" aria-label="Due Date">
                  {% if task.complete == 0 %}
                  <button class="btn btn-outline-primary my-1" style="display: block" class="mt-2" id="complete-button"> Mark Task as Complete </button>
                  <div>
                    <button class="btn btn-outline-secondary my-1" id="edit-todo-button"> Edit Task </button>
                    <button class="btn btn-outline-secondary my-2" style="display: none" id="confirm-edit-button"> Confirm Edit</button>
                  </div>
                  {% else %}
                  <span class="complete-text font-italic" name="complete-text" style="display: block"> Complete </span>
                  {% endif %}
                  <button class="btn btn-outline-danger my-1" id="delete-todo-button"> Delete Task </button>
                </div>
              </div>
              {% endfor %}
              <div class="card mt-3">
                <div class="card-body">
                  <input class="form-control my-2" name="add-title-input" placeholder="Enter task title" aria-label="Title">
                  <input class="form-control my-2" name="add-description-input" placeholder="Enter task description" aria-label="Description">
                  <input type="date" class="form-control my-2" name="add-due-date-input" placeholder="Enter task due date (YYYY-MM-DD)" aria-label="Due Date">
                  <button class="btn btn-outline-primary my-2" id="add-todo-button"> Add Task </button>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>



</body>
</html>